<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StickMan</title>
    <!-- Fabricjs-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/3.6.3/fabric.min.js"></script>
</head>

<body>
    <canvas id="canvas" width="500" height="500"></canvas>
    <script>
        // Create a canvas object
        var canvas = new fabric.Canvas('canvas');

        //set background color of canvas
        canvas.backgroundColor = 'black';

        //CIRCLES ==========================================

        // Function to create a circle with a specified fill color
        function createCircle(radius, offsetX, offsetY, fillColor) {
            // Calculate the actual left and top positions based on canvas center
            var centerX = canvas.width / 2;
            var centerY = canvas.height / 2;
            var left = centerX + offsetX;
            var top = centerY + offsetY;

            return new fabric.Circle({
                radius: radius,
                fill: fillColor, // Set the fill color for the circle
                opacity: 0.5,
                left: left,
                top: top,
                lockScalingX: true,
                lockScalingY: true,
                lockRotation: true,
                hasControls: false,
                hasBorders: false
            });
        }

        var circleSize = 5;

        // Create circle objects with matching colors
        var leftEar = createCircle(circleSize, -50, -190, '#ff00ff');
        var rightEar = createCircle(circleSize, 50, -190, 'pink');
        var leftEye = createCircle(circleSize, -20, -200, 'blue');
        var rightEye = createCircle(circleSize, 20, -200, 'red');
        var mouth = createCircle(circleSize, 0, -180, 'blue');
        var neck = createCircle(circleSize, 0, -120, 'red');
        var leftShoulder = createCircle(circleSize, -50, -100, 'brown');
        var rightShoulder = createCircle(circleSize, 50, -100, 'lightgreen');
        var leftElbow = createCircle(circleSize, -50, -50, 'yellow');
        var rightElbow = createCircle(circleSize, 50, -50, 'green');
        var leftWrist = createCircle(circleSize, -50, 20, 'darkcyan');
        var rightWrist = createCircle(circleSize, 50, 20, 'green');
        var rightHip = createCircle(circleSize, 20, 0, 'darkcyan');
        var leftHip = createCircle(circleSize, -20, 0, 'green');
        var rightKnee = createCircle(circleSize, 20, 80, 'blue');
        var leftKnee = createCircle(circleSize, -20, 80, 'lightgreen');
        var rightAnkle = createCircle(circleSize, 20, 190, 'darkcyan');
        var leftAnkle = createCircle(circleSize, -20, 190, 'lightgreen');



        //LINES ==========================================
        function createLine(startObj, endObj, strokeColor) {
            return new fabric.Line(
                [
                    startObj.left + startObj.radius,
                    startObj.top + startObj.radius,
                    endObj.left + endObj.width / 2,
                    endObj.top
                ],
                {
                    stroke: strokeColor,
                    strokeWidth: 5,
                    hasControls: false,
                    hasBorders: false,
                    selectable: false
                }
            );
        }

        var lineLeftEar = createLine(leftEar, leftEye, '#ff00ff');
        var lineRightEar = createLine(rightEar, rightEye, 'pink');
        var lineBl = createLine(leftEye, mouth, 'blue');
        var lineBr = createLine(rightEye, mouth, 'red');
        var lineCm = createLine(mouth, neck, 'blue');
        var lineLeftShoulder = createLine(neck, leftShoulder, 'red');
        var lineRightShoulder = createLine(neck, rightShoulder, 'brown');
        var lineLeftElbow = createLine(leftShoulder, leftElbow, 'orange');
        var lineRightElbow = createLine(rightShoulder, rightElbow, 'lightgreen');
        var lineLeftWrist = createLine(leftElbow, leftWrist, 'yellow');
        var lineRightWrist = createLine(rightElbow, rightWrist, 'green');
        var lineEr = createLine(neck, rightHip, 'darkcyan');
        var lineEl = createLine(neck, leftHip, 'green');
        var lineFr = createLine(rightHip, rightKnee, 'darkcyan');
        var lineFl = createLine(leftHip, leftKnee, 'green');
        var lineGr = createLine(rightKnee, rightAnkle, 'blue');
        var lineGl = createLine(leftKnee, leftAnkle, 'lightgreen');



        //MOVING ==========================================

        //when leftEar or rightEar or leftEye or rightEye moves, update start and end of lineLeftEar
        leftEar.on('moving', function () {
            lineLeftEar.set({
                'x1': leftEar.left + leftEar.radius,
                'y1': leftEar.top + leftEar.radius
            });
        });

        rightEar.on('moving', function () {
            lineRightEar.set({
                'x1': rightEar.left + rightEar.radius,
                'y1': rightEar.top + rightEar.radius
            });
        });

        leftEye.on('moving', function () {
            lineLeftEar.set({
                'x2': leftEye.left + leftEye.width / 2,
                'y2': leftEye.top
            });
            lineBl.set({
                'x1': leftEye.left + leftEye.radius,
                'y1': leftEye.top + leftEye.radius
            });
        });

        rightEye.on('moving', function () {
            lineRightEar.set({
                'x2': rightEye.left + rightEye.width / 2,
                'y2': rightEye.top
            });
            lineBr.set({
                'x1': rightEye.left + rightEye.radius,
                'y1': rightEye.top + rightEye.radius
            });
        });

        mouth.on('moving', function () {
            lineBl.set({
                'x2': mouth.left + mouth.width / 2,
                'y2': mouth.top
            });
        });

        mouth.on('moving', function () {
            lineBr.set({
                'x2': mouth.left + mouth.width / 2,
                'y2': mouth.top
            });
            lineCm.set({
                'x1': mouth.left + mouth.radius,
                'y1': mouth.top + mouth.radius
            });
        });

        neck.on('moving', function () {
            lineCm.set({
                'x2': neck.left + neck.width / 2,
                'y2': neck.top
            });
            lineEr.set({
                'x1': neck.left + neck.radius,
                'y1': neck.top + neck.radius
            });
            lineEl.set({
                'x1': neck.left + neck.radius,
                'y1': neck.top + neck.radius
            });
            lineLeftShoulder.set({
                'x1': neck.left + neck.radius,
                'y1': neck.top + neck.radius
            });
            lineRightShoulder.set({
                'x1': neck.left + neck.radius,
                'y1': neck.top + neck.radius
            });
        });

        rightShoulder.on('moving', function () {
            lineRightShoulder.set({
                'x2': rightShoulder.left + rightShoulder.width / 2,
                'y2': rightShoulder.top
            });
            lineRightElbow.set({
                'x1': rightShoulder.left + rightShoulder.radius,
                'y1': rightShoulder.top + rightShoulder.radius
            });
        });

        leftShoulder.on('moving', function () {
            lineLeftShoulder.set({
                'x2': leftShoulder.left + leftShoulder.width / 2,
                'y2': leftShoulder.top
            });
            lineLeftElbow.set({
                'x1': leftShoulder.left + leftShoulder.radius,
                'y1': leftShoulder.top + leftShoulder.radius
            });
        });

        leftElbow.on('moving', function () {
            lineLeftElbow.set({
                'x2': leftElbow.left + leftElbow.width / 2,
                'y2': leftElbow.top
            });
            lineLeftWrist.set({
                'x1': leftElbow.left + leftElbow.radius,
                'y1': leftElbow.top + leftElbow.radius
            });
        });

        rightElbow.on('moving', function () {
            lineRightElbow.set({
                'x2': rightElbow.left + rightElbow.width / 2,
                'y2': rightElbow.top
            });
            lineRightWrist.set({
                'x1': rightElbow.left + rightElbow.radius,
                'y1': rightElbow.top + rightElbow.radius
            });
        });

        leftWrist.on('moving', function () {
            lineLeftWrist.set({
                'x2': leftWrist.left + leftWrist.width / 2,
                'y2': leftWrist.top
            });
        });

        rightWrist.on('moving', function () {
            lineRightWrist.set({
                'x2': rightWrist.left + rightWrist.width / 2,
                'y2': rightWrist.top
            });
        });



        rightHip.on('moving', function () {
            lineEr.set({
                'x2': rightHip.left + rightHip.width / 2,
                'y2': rightHip.top
            });
            lineFr.set({
                'x1': rightHip.left + rightHip.radius,
                'y1': rightHip.top + rightHip.radius
            });
        });

        leftHip.on('moving', function () {
            lineEl.set({
                'x2': leftHip.left + leftHip.width / 2,
                'y2': leftHip.top
            });
            lineFl.set({
                'x1': leftHip.left + leftHip.radius,
                'y1': leftHip.top + leftHip.radius
            });
        });

        rightKnee.on('moving', function () {
            lineFr.set({
                'x2': rightKnee.left + rightKnee.width / 2,
                'y2': rightKnee.top
            });
            lineGr.set({
                'x1': rightKnee.left + rightKnee.radius,
                'y1': rightKnee.top + rightKnee.radius
            });
        });

        leftKnee.on('moving', function () {
            lineFl.set({
                'x2': leftKnee.left + leftKnee.width / 2,
                'y2': leftKnee.top
            });
            lineGl.set({
                'x1': leftKnee.left + leftKnee.radius,
                'y1': leftKnee.top + leftKnee.radius
            });
        });

        rightAnkle.on('moving', function () {
            lineGr.set({
                'x2': rightAnkle.left + rightAnkle.width / 2,
                'y2': rightAnkle.top
            });
        });

        leftAnkle.on('moving', function () {
            lineGl.set({
                'x2': leftAnkle.left + leftAnkle.width / 2,
                'y2': leftAnkle.top
            });
        });



        // Add all objects to canvas
        canvas.add(lineLeftEar);
        canvas.add(lineRightEar);
        canvas.add(lineBl);
        canvas.add(lineBr);
        canvas.add(lineCm);
        canvas.add(lineEr);
        canvas.add(lineEl);
        canvas.add(lineFr);
        canvas.add(lineFl);
        canvas.add(lineGr);
        canvas.add(lineGl);
        canvas.add(lineLeftShoulder);
        canvas.add(lineRightShoulder);
        canvas.add(lineLeftElbow);
        canvas.add(lineRightElbow);
        canvas.add(lineLeftWrist);
        canvas.add(lineRightWrist);

        canvas.add(leftEar);
        canvas.add(rightEar);
        canvas.add(leftEye);
        canvas.add(rightEye);
        canvas.add(mouth);
        canvas.add(neck);
        canvas.add(leftShoulder);
        canvas.add(rightShoulder);
        canvas.add(leftElbow);
        canvas.add(rightElbow);
        canvas.add(leftWrist);
        canvas.add(rightWrist);
        canvas.add(rightHip);
        canvas.add(leftHip);
        canvas.add(rightKnee);
        canvas.add(leftKnee);
        canvas.add(rightAnkle);
        canvas.add(leftAnkle);

    </script>
</body>

</html>